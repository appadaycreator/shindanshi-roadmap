<!-- 共通ヘッダー -->
<!-- PC用ヘッダー -->
<header class="hidden lg:block bg-white shadow-sm border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <div class="flex items-center">
                <a href="index.html" class="flex items-center">
                    <i class="fas fa-road text-blue-600 text-2xl mr-3"></i>
                    <h1 class="text-xl font-bold text-gray-900" data-i18n="app_title">中小企業診断士合格ロードマップ</h1>
                </a>
            </div>
            <nav class="flex space-x-8">
                <a href="index.html" class="nav-link text-gray-500 hover:text-gray-900" data-i18n="nav_dashboard">ダッシュボード</a>
                <a href="lp.html" class="nav-link text-gray-500 hover:text-gray-900" data-i18n="nav_about">サービス紹介</a>
                <a href="usage.html" class="nav-link text-gray-500 hover:text-gray-900" data-i18n="nav_usage">使い方</a>
                <a href="contact.html" class="nav-link text-gray-500 hover:text-gray-900" data-i18n="nav_contact">お問い合わせ</a>
            </nav>
            <div class="flex items-center space-x-4">
                <select id="langSelect" class="border border-gray-300 rounded px-2 py-1 text-sm">
                    <option value="ja">日本語</option>
                    <option value="en">English</option>
                </select>
                <select id="fontSizeSelect" class="border border-gray-300 rounded px-2 py-1 text-sm">
                    <option value="xs">極小</option>
                    <option value="sm">小</option>
                    <option value="base" selected>標準</option>
                    <option value="lg">大</option>
                    <option value="xl">特大</option>
                </select>
                <button id="darkModeToggle" class="p-2 rounded hover:bg-gray-100">
                    <i class="fas fa-moon text-gray-600"></i>
                </button>
            </div>
        </div>
    </div>
</header>

<!-- モバイル用ヘッダー -->
<header class="lg:hidden bg-white shadow-sm border-b border-gray-200">
    <div class="px-4 sm:px-6">
        <div class="flex justify-between items-center h-16">
            <div class="flex items-center">
                <a href="index.html" class="flex items-center">
                    <i class="fas fa-road text-blue-600 text-xl mr-2"></i>
                    <h1 class="text-lg font-bold text-gray-900" data-i18n="app_title_short">診断士ロードマップ</h1>
                </a>
            </div>
            <button id="mobileMenuBtn" class="p-2 rounded hover:bg-gray-100">
                <div class="w-6 h-6 relative">
                    <span class="hamburger-line absolute h-0.5 w-full bg-gray-600 rounded transform transition duration-300 ease-in-out" style="top: 5px"></span>
                    <span class="hamburger-line absolute h-0.5 w-full bg-gray-600 rounded transform transition duration-300 ease-in-out" style="top: 11px"></span>
                    <span class="hamburger-line absolute h-0.5 w-full bg-gray-600 rounded transform transition duration-300 ease-in-out" style="top: 17px"></span>
                </div>
            </button>
        </div>
    </div>
    
    <!-- モバイルメニュー -->
    <div id="mobileMenu" class="hidden">
        <div class="px-2 pt-2 pb-3 space-y-1">
            <a href="index.html" class="block px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md"><i class="fas fa-home mr-3"></i><span data-i18n="nav_dashboard">ダッシュボード</span></a>
            <a href="lp.html" class="block px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md"><i class="fas fa-info-circle mr-3"></i><span data-i18n="nav_about">サービス紹介</span></a>
            <a href="usage.html" class="block px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md"><i class="fas fa-book mr-3"></i><span data-i18n="nav_usage">使い方</span></a>
            <a href="contact.html" class="block px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-md"><i class="fas fa-envelope mr-3"></i><span data-i18n="nav_contact">お問い合わせ</span></a>
        </div>
        <div class="border-t border-gray-200 px-4 py-3">
            <div class="space-y-3">
                <div class="flex items-center justify-between">
                    <span class="text-sm text-gray-600" data-i18n="setting_language">言語</span>
                    <select id="langSelectMobile" class="border border-gray-300 rounded px-2 py-1 text-sm">
                        <option value="ja">日本語</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-sm text-gray-600" data-i18n="setting_fontSize">文字サイズ</span>
                    <select id="fontSizeSelectMobile" class="border border-gray-300 rounded px-2 py-1 text-sm">
                        <option value="xs">極小</option>
                        <option value="sm">小</option>
                        <option value="base" selected>標準</option>
                        <option value="lg">大</option>
                        <option value="xl">特大</option>
                    </select>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-sm text-gray-600" data-i18n="setting_darkMode">ダークモード</span>
                    <button id="darkModeToggleMobile" class="p-2 rounded hover:bg-gray-100">
                        <i class="fas fa-moon text-gray-600"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</header>

<script>
// ヘッダー用JavaScript
(function() {
    // 現在のページを特定してナビゲーションをハイライト
    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
        if (link.getAttribute('href') === currentPage) {
            link.classList.remove('text-gray-500');
            link.classList.add('text-blue-600', 'font-medium');
        }
    });

    // モバイルメニュー用のリンクも同様に処理
    const mobileLinks = document.querySelectorAll('#mobileMenu a');
    mobileLinks.forEach(link => {
        if (link.getAttribute('href') === currentPage) {
            link.classList.add('bg-blue-50', 'text-blue-600');
            link.classList.remove('text-gray-600');
        }
    });

    // モバイルメニューの開閉
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    
    if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
            mobileMenuBtn.classList.toggle('hamburger-active');
        });
    }

    // 言語選択の同期
    const langSelect = document.getElementById('langSelect');
    const langSelectMobile = document.getElementById('langSelectMobile');
    
    if (langSelect && langSelectMobile) {
        langSelect.addEventListener('change', (e) => {
            langSelectMobile.value = e.target.value;
            // 言語変更処理をここに追加
        });
        
        langSelectMobile.addEventListener('change', (e) => {
            langSelect.value = e.target.value;
            // 言語変更処理をここに追加
        });
    }

    // フォントサイズ選択の同期
    const fontSizeSelect = document.getElementById('fontSizeSelect');
    const fontSizeSelectMobile = document.getElementById('fontSizeSelectMobile');
    
    if (fontSizeSelect && fontSizeSelectMobile) {
        fontSizeSelect.addEventListener('change', (e) => {
            fontSizeSelectMobile.value = e.target.value;
            document.body.className = document.body.className.replace(/text-\w+-size/g, '') + ' text-' + e.target.value + '-size';
        });
        
        fontSizeSelectMobile.addEventListener('change', (e) => {
            fontSizeSelect.value = e.target.value;
            document.body.className = document.body.className.replace(/text-\w+-size/g, '') + ' text-' + e.target.value + '-size';
        });
    }

    // ダークモード切り替え
    const darkModeToggle = document.getElementById('darkModeToggle');
    const darkModeToggleMobile = document.getElementById('darkModeToggleMobile');
    
    function toggleDarkMode() {
        document.documentElement.classList.toggle('dark');
        const isDark = document.documentElement.classList.contains('dark');
        
        if (darkModeToggle) {
            darkModeToggle.innerHTML = isDark ? '<i class="fas fa-sun text-yellow-500"></i>' : '<i class="fas fa-moon text-gray-600"></i>';
        }
        if (darkModeToggleMobile) {
            darkModeToggleMobile.innerHTML = isDark ? '<i class="fas fa-sun text-yellow-500"></i>' : '<i class="fas fa-moon text-gray-600"></i>';
        }
        
        localStorage.setItem('darkMode', isDark ? 'true' : 'false');
    }
    
    if (darkModeToggle) {
        darkModeToggle.addEventListener('click', toggleDarkMode);
    }
    if (darkModeToggleMobile) {
        darkModeToggleMobile.addEventListener('click', toggleDarkMode);
    }

    // 保存された設定の読み込み
    if (localStorage.getItem('darkMode') === 'true') {
        document.documentElement.classList.add('dark');
        if (darkModeToggle) darkModeToggle.innerHTML = '<i class="fas fa-sun text-yellow-500"></i>';
        if (darkModeToggleMobile) darkModeToggleMobile.innerHTML = '<i class="fas fa-sun text-yellow-500"></i>';
    }
})();
</script>